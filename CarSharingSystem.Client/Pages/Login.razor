@page "/"
@using CarSharingSystem.Client.Services
@inject AuthService Auth
@inject NavigationManager Nav

<h3>🔑 Logowanie</h3>

@if (!string.IsNullOrEmpty(message))
{
    <div>@message</div>
}

<input @bind="email" placeholder="Email" class="form-control" />
<input type="password" @bind="password" placeholder="Hasło" class="form-control" />
<button @onclick="LoginUser" class="btn btn-primary mt-2">Zaloguj</button>
<p class="mt-3">
    Nie masz konta? <a href="/register">Zarejestruj się</a>
</p>

@code {
    private string email = "";
    private string password = "";
    private string message = "";

    private async Task LoginUser()
    {
        var ok = await Auth.LoginAsync(email, password);
        message = ok ? "✅ Zalogowano!" : "❌ Błędne dane logowania";
        if (ok)
        {
            Nav.NavigateTo("/cars");
        }
    }
}
